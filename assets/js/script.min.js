$(document).ready(function(){var e=$(".work"),i=!0,n=null;$(this).on("mousewheel DOMMouseScroll",function(e){if(!$(".outer-nav").hasClass("is-vis")){e.preventDefault();var t=e.originalEvent.wheelDelta?-e.originalEvent.wheelDelta:20*e.originalEvent.detail;t>50&&i?(i=!1,clearTimeout(n),n=setTimeout(function(){i=!0},800),s(1)):t<-50&&i&&(i=!1,clearTimeout(n),n=setTimeout(function(){i=!0},800),s(-1))}}),$(".side-nav li, .outer-nav li").click(function(){if(!$(this).hasClass("is-active")){var e=$(this),i=e.parent().find(".is-active"),n=e.parent().children().index(i),t=e.parent().children().index(e),o=$(this).parent().children().length-1;l(t),a(n,t,o)}}),$(".cta").click(function(){var e=$(".side-nav").find(".is-active"),i=$(".side-nav").children().index(e),n=$(".side-nav").children().length-1,t=n;l(n),a(i,t,n)});var t=document.getElementById("viewport"),o=new Hammer(t);function s(e){var i=$(".side-nav").find(".is-active"),n=$(".side-nav").children().index(i),t=$(".side-nav").children().length-1,o=0;"swipeup"===e.type||40===e.keyCode||e>0?n!==t?(l(o=n+1),a(n,o,t)):(l(o),a(n,o,t)):("swipedown"===e.type||38===e.keyCode||e<0)&&(0!==n?(l(o=n-1),a(n,o,t)):(l(o=t),a(n,o,t)))}function l(e){$(".side-nav, .outer-nav").children().removeClass("is-active"),$(".side-nav").children().eq(e).addClass("is-active"),$(".outer-nav").children().eq(e).addClass("is-active")}function a(e,i,n){$(".main-content").children().removeClass("section--is-active"),$(".main-content").children().eq(i).addClass("section--is-active"),$(".main-content .section").children().removeClass("section--next section--prev"),e===n&&0===i||0===e&&i===n?$(".main-content .section").children().removeClass("section--next section--prev"):e<i?$(".main-content").children().eq(e).children().addClass("section--next"):$(".main-content").children().eq(e).children().addClass("section--prev"),0!==i&&i!==n?$(".header--cta").addClass("is-active"):$(".header--cta").removeClass("is-active")}o.get("swipe").set({direction:Hammer.DIRECTION_VERTICAL}),o.on("swipeup swipedown",function(e){s(e)}),$(document).keyup(function(e){$(".outer-nav").hasClass("is-vis")||(e.preventDefault(),s(e))}),$(".header--nav-toggle").click(function(){$(".perspective").addClass("perspective--modalview"),setTimeout(function(){$(".perspective").addClass("effect-rotate-left--animate")},25),$(".outer-nav, .outer-nav li, .outer-nav--return").addClass("is-vis")}),$(".outer-nav--return, .outer-nav li").click(function(){$(".perspective").removeClass("effect-rotate-left--animate"),setTimeout(function(){$(".perspective").removeClass("perspective--modalview")},400),$(".outer-nav, .outer-nav li, .outer-nav--return").removeClass("is-vis")}),function(){var i=e.find(".outer-slider"),n=e.find(".inner-slider"),t=e.find(".inner-slider--prev"),o=e.find(".inner-slider--next"),s=e.find(".outer-slider--controls");console.log(n),console.log(t),console.log(o);var l=new Swiper(i,{loop:!0,loopedSlides:4,slidesPerView:"auto",centeredSlides:!0,normalizeSlideIndex:!0,direction:"vertical",allowTouchMove:!1,effect:"slide",controller:{by:"slide"}}),a=new Swiper(s,{spaceBetween:0,effect:"slide",normalizeSlideIndex:!0,direction:"horizontal",centeredSlides:!0,loop:!0,loopedSlides:4,slidesPerView:"auto",touchRatio:.2,slideToClickedSlide:!0});a.controller.control=l,l.controller.control=a,new Swiper(n,{direction:"horizontal",loop:!0,spaceBetween:0,slidesPerView:"auto",loopedSlides:7,loopAdditionalSlides:10,centeredSlides:!0,spaceBetween:0,effect:"coverflow",coverflowEffect:{rotate:40,stretch:0,depth:100,modifier:1,slideShadows:!0},normalizeSlideIndex:!0,slideToClickedSlide:!0})}(),$(".work-request--information input").focusout(function(){""===$(this).val()?$(this).removeClass("has-value"):$(this).addClass("has-value"),window.scrollTo(0,0)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndvcmsiLCJjYW5TY3JvbGwiLCJzY3JvbGxDb250cm9sbGVyIiwidGhpcyIsIm9uIiwiZSIsImhhc0NsYXNzIiwicHJldmVudERlZmF1bHQiLCJkZWx0YSIsIm9yaWdpbmFsRXZlbnQiLCJ3aGVlbERlbHRhIiwiZGV0YWlsIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInVwZGF0ZUhlbHBlciIsImNsaWNrIiwiJHRoaXMiLCJjdXJBY3RpdmUiLCJwYXJlbnQiLCJmaW5kIiwiY3VyUG9zIiwiY2hpbGRyZW4iLCJpbmRleCIsIm5leHRQb3MiLCJsYXN0SXRlbSIsImxlbmd0aCIsInVwZGF0ZU5hdnMiLCJ1cGRhdGVDb250ZW50IiwidGFyZ2V0RWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwibWMiLCJIYW1tZXIiLCJwYXJhbSIsInR5cGUiLCJrZXlDb2RlIiwicmVtb3ZlQ2xhc3MiLCJlcSIsImFkZENsYXNzIiwiZ2V0Iiwic2V0IiwiZGlyZWN0aW9uIiwiRElSRUNUSU9OX1ZFUlRJQ0FMIiwia2V5dXAiLCJvdXRlclNsaWRlciIsImlubmVyU2xpZGVyIiwiaW5uZXJTbGlkZXJQcmV2QnRuIiwiaW5uZXJTbGlkZXJOZXh0QnRuIiwib3V0ZXJTbGlkZXJDb250cm9scyIsImNvbnNvbGUiLCJsb2ciLCJvdXRlclN3aXBlciIsIlN3aXBlciIsImxvb3AiLCJsb29wZWRTbGlkZXMiLCJzbGlkZXNQZXJWaWV3IiwiY2VudGVyZWRTbGlkZXMiLCJub3JtYWxpemVTbGlkZUluZGV4IiwiYWxsb3dUb3VjaE1vdmUiLCJlZmZlY3QiLCJjb250cm9sbGVyIiwiYnkiLCJvdXRlclN3aXBlckNvbnRyb2xzIiwic3BhY2VCZXR3ZWVuIiwidG91Y2hSYXRpbyIsInNsaWRlVG9DbGlja2VkU2xpZGUiLCJjb250cm9sIiwibG9vcEFkZGl0aW9uYWxTbGlkZXMiLCJjb3ZlcmZsb3dFZmZlY3QiLCJyb3RhdGUiLCJzdHJldGNoIiwiZGVwdGgiLCJtb2RpZmllciIsInNsaWRlU2hhZG93cyIsIndvcmtTbGlkZXIiLCJmb2N1c291dCIsInZhbCIsIndpbmRvdyIsInNjcm9sbFRvIl0sIm1hcHBpbmdzIjoiQUFFQUEsRUFBQUMsVUFBQUMsTUFBQSxXQUVBLElBQUFDLEVBQUFILEVBQUEsU0FHQUksR0FBQSxFQUNBQyxFQUFBLEtBQ0FMLEVBQUFNLE1BQUFDLEdBQUEsNEJBQUEsU0FBQUMsR0FFQSxJQUFBUixFQUFBLGNBQUFTLFNBQUEsVUFBQSxDQUVBRCxFQUFBRSxpQkFFQSxJQUFBQyxFQUFBSCxFQUFBSSxjQUFBLFlBQUFKLEVBQUFJLGNBQUFDLFdBQUEsR0FBQUwsRUFBQUksY0FBQUUsT0FFQUgsRUFBQSxJQUFBUCxHQUNBQSxHQUFBLEVBQ0FXLGFBQUFWLEdBQ0FBLEVBQUFXLFdBQUEsV0FDQVosR0FBQSxHQUNBLEtBQ0FhLEVBQUEsSUFFQU4sR0FBQSxJQUFBUCxJQUNBQSxHQUFBLEVBQ0FXLGFBQUFWLEdBQ0FBLEVBQUFXLFdBQUEsV0FDQVosR0FBQSxHQUNBLEtBQ0FhLEdBQUEsT0FPQWpCLEVBQUEsK0JBQUFrQixNQUFBLFdBRUEsSUFBQWxCLEVBQUFNLE1BQUFHLFNBQUEsYUFBQSxDQUVBLElBQUFVLEVBQUFuQixFQUFBTSxNQUNBYyxFQUFBRCxFQUFBRSxTQUFBQyxLQUFBLGNBQ0FDLEVBQUFKLEVBQUFFLFNBQUFHLFdBQUFDLE1BQUFMLEdBQ0FNLEVBQUFQLEVBQUFFLFNBQUFHLFdBQUFDLE1BQUFOLEdBQ0FRLEVBQUEzQixFQUFBTSxNQUFBZSxTQUFBRyxXQUFBSSxPQUFBLEVBRUFDLEVBQUFILEdBQ0FJLEVBQUFQLEVBQUFHLEVBQUFDLE1BTUEzQixFQUFBLFFBQUFrQixNQUFBLFdBRUEsSUFBQUUsRUFBQXBCLEVBQUEsYUFBQXNCLEtBQUEsY0FDQUMsRUFBQXZCLEVBQUEsYUFBQXdCLFdBQUFDLE1BQUFMLEdBQ0FPLEVBQUEzQixFQUFBLGFBQUF3QixXQUFBSSxPQUFBLEVBQ0FG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QUFBLElBQUFWLE9BQUFKLEdBQ0FlLGFBQUEsRUFDQUosT0FBQSxRQUNBRixxQkFBQSxFQUNBaEIsVUFBQSxhQUNBZSxnQkFBQSxFQUNBSCxNQUFBLEVBQ0FDLGFBQUEsRUFDQUMsY0FBQSxPQUNBUyxXQUFBLEdBQ0FDLHFCQUFBLElBR0FILEVBQUFGLFdBQUFNLFFBQUFmLEVBQ0FBLEVBQUFTLFdBQUFNLFFBQUFKLEVBR0EsSUFBQVYsT0FBQVAsR0FFQUosVUFBQSxhQUNBWSxNQUFBLEVBQ0FVLGFBQUEsRUFFQVIsY0FBQSxPQUNBRCxhQUFBLEVBQ0FhLHFCQUFBLEdBQ0FYLGdCQUFBLEVBQ0FPLGFBQUEsRUFFQUosT0FBQSxZQUVBUyxpQkFDQUMsT0FBQSxHQUNBQyxRQUFBLEVBQ0FDLE1BQUEsSUFDQUMsU0FBQSxFQUNBQyxjQUFBLEdBRUFoQixxQkFBQSxFQUNBUSxxQkFBQSxJQXFDQVMsR0FuQkE1RSxFQUFBLG9DQUFBNkUsU0FBQSxXQUlBLEtBRkE3RSxFQUFBTSxNQUFBd0UsTUFHQTlFLEVBQUFNLE1BQUFnQyxZQUFBLGFBR0F0QyxFQUFBTSxNQUFBa0MsU0FBQSxhQUlBdUMsT0FBQUMsU0FBQSxFQUFBIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAY29kZWtpdC1wcmVwZW5kIFwiL3ZlbmRvci9oYW1tZXItMi4wLjguanNcIjtcclxuXHJcbiQoIGRvY3VtZW50ICkucmVhZHkoZnVuY3Rpb24oKSB7XHJcblxyXG4gIHZhciB3b3JrID0gJCgnLndvcmsnKTtcclxuXHJcbiAgLy8gRE9NTW91c2VTY3JvbGwgaW5jbHVkZWQgZm9yIGZpcmVmb3ggc3VwcG9ydFxyXG4gIHZhciBjYW5TY3JvbGwgPSB0cnVlLFxyXG4gICAgICBzY3JvbGxDb250cm9sbGVyID0gbnVsbDtcclxuICAkKHRoaXMpLm9uKCdtb3VzZXdoZWVsIERPTU1vdXNlU2Nyb2xsJywgZnVuY3Rpb24oZSl7XHJcblxyXG4gICAgaWYgKCEoJCgnLm91dGVyLW5hdicpLmhhc0NsYXNzKCdpcy12aXMnKSkpIHtcclxuXHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIHZhciBkZWx0YSA9IChlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSkgPyAtZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEgOiBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsICogMjA7XHJcblxyXG4gICAgICBpZiAoZGVsdGEgPiA1MCAmJiBjYW5TY3JvbGwpIHtcclxuICAgICAgICBjYW5TY3JvbGwgPSBmYWxzZTtcclxuICAgICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsQ29udHJvbGxlcik7XHJcbiAgICAgICAgc2Nyb2xsQ29udHJvbGxlciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgIGNhblNjcm9sbCA9IHRydWU7XHJcbiAgICAgICAgfSwgODAwKTtcclxuICAgICAgICB1cGRhdGVIZWxwZXIoMSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoZGVsdGEgPCAtNTAgJiYgY2FuU2Nyb2xsKSB7XHJcbiAgICAgICAgY2FuU2Nyb2xsID0gZmFsc2U7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbENvbnRyb2xsZXIpO1xyXG4gICAgICAgIHNjcm9sbENvbnRyb2xsZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBjYW5TY3JvbGwgPSB0cnVlO1xyXG4gICAgICAgIH0sIDgwMCk7XHJcbiAgICAgICAgdXBkYXRlSGVscGVyKC0xKTtcclxuICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgfSk7XHJcblxyXG4gICQoJy5zaWRlLW5hdiBsaSwgLm91dGVyLW5hdiBsaScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgaWYgKCEoJCh0aGlzKS5oYXNDbGFzcygnaXMtYWN0aXZlJykpKSB7XHJcblxyXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgY3VyQWN0aXZlID0gJHRoaXMucGFyZW50KCkuZmluZCgnLmlzLWFjdGl2ZScpLFxyXG4gICAgICAgICAgY3VyUG9zID0gJHRoaXMucGFyZW50KCkuY2hpbGRyZW4oKS5pbmRleChjdXJBY3RpdmUpLFxyXG4gICAgICAgICAgbmV4dFBvcyA9ICR0aGlzLnBhcmVudCgpLmNoaWxkcmVuKCkuaW5kZXgoJHRoaXMpLFxyXG4gICAgICAgICAgbGFzdEl0ZW0gPSAkKHRoaXMpLnBhcmVudCgpLmNoaWxkcmVuKCkubGVuZ3RoIC0gMTtcclxuXHJcbiAgICAgIHVwZGF0ZU5hdnMobmV4dFBvcyk7XHJcbiAgICAgIHVwZGF0ZUNvbnRlbnQoY3VyUG9zLCBuZXh0UG9zLCBsYXN0SXRlbSk7XHJcblxyXG4gICAgfVxyXG5cclxuICB9KTtcclxuXHJcbiAgJCgnLmN0YScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgdmFyIGN1ckFjdGl2ZSA9ICQoJy5zaWRlLW5hdicpLmZpbmQoJy5pcy1hY3RpdmUnKSxcclxuICAgICAgICBjdXJQb3MgPSAkKCcuc2lkZS1uYXYnKS5jaGlsZHJlbigpLmluZGV4KGN1ckFjdGl2ZSksXHJcbiAgICAgICAgbGFzdEl0ZW0gPSAkKCcuc2lkZS1uYXYnKS5jaGlsZHJlbigpLmxlbmd0aCAtIDEsXHJcbiAgICAgICAgbmV4dFBvcyA9IGxhc3RJdGVtO1xyXG5cclxuICAgIHVwZGF0ZU5hdnMobGFzdEl0ZW0pO1xyXG4gICAgdXBkYXRlQ29udGVudChjdXJQb3MsIG5leHRQb3MsIGxhc3RJdGVtKTtcclxuXHJcbiAgfSk7XHJcblxyXG4gIC8vIHN3aXBlIHN1cHBvcnQgZm9yIHRvdWNoIGRldmljZXNcclxuICB2YXIgdGFyZ2V0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3cG9ydCcpLFxyXG4gICAgICBtYyA9IG5ldyBIYW1tZXIodGFyZ2V0RWxlbWVudCk7XHJcbiAgbWMuZ2V0KCdzd2lwZScpLnNldCh7IGRpcmVjdGlvbjogSGFtbWVyLkRJUkVDVElPTl9WRVJUSUNBTCB9KTtcclxuICBtYy5vbignc3dpcGV1cCBzd2lwZWRvd24nLCBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgdXBkYXRlSGVscGVyKGUpO1xyXG5cclxuICB9KTtcclxuXHJcbiAgJChkb2N1bWVudCkua2V5dXAoZnVuY3Rpb24oZSl7XHJcblxyXG4gICAgaWYgKCEoJCgnLm91dGVyLW5hdicpLmhhc0NsYXNzKCdpcy12aXMnKSkpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB1cGRhdGVIZWxwZXIoZSk7XHJcbiAgICB9XHJcblxyXG4gIH0pO1xyXG5cclxuICAvLyBkZXRlcm1pbmUgc2Nyb2xsLCBzd2lwZSwgYW5kIGFycm93IGtleSBkaXJlY3Rpb25cclxuICBmdW5jdGlvbiB1cGRhdGVIZWxwZXIocGFyYW0pIHtcclxuXHJcbiAgICB2YXIgY3VyQWN0aXZlID0gJCgnLnNpZGUtbmF2JykuZmluZCgnLmlzLWFjdGl2ZScpLFxyXG4gICAgICAgIGN1clBvcyA9ICQoJy5zaWRlLW5hdicpLmNoaWxkcmVuKCkuaW5kZXgoY3VyQWN0aXZlKSxcclxuICAgICAgICBsYXN0SXRlbSA9ICQoJy5zaWRlLW5hdicpLmNoaWxkcmVuKCkubGVuZ3RoIC0gMSxcclxuICAgICAgICBuZXh0UG9zID0gMDtcclxuXHJcbiAgICBpZiAocGFyYW0udHlwZSA9PT0gXCJzd2lwZXVwXCIgfHwgcGFyYW0ua2V5Q29kZSA9PT0gNDAgfHwgcGFyYW0gPiAwKSB7XHJcbiAgICAgIGlmIChjdXJQb3MgIT09IGxhc3RJdGVtKSB7XHJcbiAgICAgICAgbmV4dFBvcyA9IGN1clBvcyArIDE7XHJcbiAgICAgICAgdXBkYXRlTmF2cyhuZXh0UG9zKTtcclxuICAgICAgICB1cGRhdGVDb250ZW50KGN1clBvcywgbmV4dFBvcywgbGFzdEl0ZW0pO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHVwZGF0ZU5hdnMobmV4dFBvcyk7XHJcbiAgICAgICAgdXBkYXRlQ29udGVudChjdXJQb3MsIG5leHRQb3MsIGxhc3RJdGVtKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAocGFyYW0udHlwZSA9PT0gXCJzd2lwZWRvd25cIiB8fCBwYXJhbS5rZXlDb2RlID09PSAzOCB8fCBwYXJhbSA8IDApe1xyXG4gICAgICBpZiAoY3VyUG9zICE9PSAwKXtcclxuICAgICAgICBuZXh0UG9zID0gY3VyUG9zIC0gMTtcclxuICAgICAgICB1cGRhdGVOYXZzKG5leHRQb3MpO1xyXG4gICAgICAgIHVwZGF0ZUNvbnRlbnQoY3VyUG9zLCBuZXh0UG9zLCBsYXN0SXRlbSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgbmV4dFBvcyA9IGxhc3RJdGVtO1xyXG4gICAgICAgIHVwZGF0ZU5hdnMobmV4dFBvcyk7XHJcbiAgICAgICAgdXBkYXRlQ29udGVudChjdXJQb3MsIG5leHRQb3MsIGxhc3RJdGVtKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8vIHN5bmMgc2lkZSBhbmQgb3V0ZXIgbmF2aWdhdGlvbnNcclxuICBmdW5jdGlvbiB1cGRhdGVOYXZzKG5leHRQb3MpIHtcclxuXHJcbiAgICAkKCcuc2lkZS1uYXYsIC5vdXRlci1uYXYnKS5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICQoJy5zaWRlLW5hdicpLmNoaWxkcmVuKCkuZXEobmV4dFBvcykuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgJCgnLm91dGVyLW5hdicpLmNoaWxkcmVuKCkuZXEobmV4dFBvcykuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG5cclxuICB9XHJcblxyXG4gIC8vIHVwZGF0ZSBtYWluIGNvbnRlbnQgYXJlYVxyXG4gIGZ1bmN0aW9uIHVwZGF0ZUNvbnRlbnQoY3VyUG9zLCBuZXh0UG9zLCBsYXN0SXRlbSkge1xyXG5cclxuICAgICQoJy5tYWluLWNvbnRlbnQnKS5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCdzZWN0aW9uLS1pcy1hY3RpdmUnKTtcclxuICAgICQoJy5tYWluLWNvbnRlbnQnKS5jaGlsZHJlbigpLmVxKG5leHRQb3MpLmFkZENsYXNzKCdzZWN0aW9uLS1pcy1hY3RpdmUnKTtcclxuICAgICQoJy5tYWluLWNvbnRlbnQgLnNlY3Rpb24nKS5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCdzZWN0aW9uLS1uZXh0IHNlY3Rpb24tLXByZXYnKTtcclxuXHJcbiAgICBpZiAoY3VyUG9zID09PSBsYXN0SXRlbSAmJiBuZXh0UG9zID09PSAwIHx8IGN1clBvcyA9PT0gMCAmJiBuZXh0UG9zID09PSBsYXN0SXRlbSkge1xyXG4gICAgICAkKCcubWFpbi1jb250ZW50IC5zZWN0aW9uJykuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygnc2VjdGlvbi0tbmV4dCBzZWN0aW9uLS1wcmV2Jyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChjdXJQb3MgPCBuZXh0UG9zKSB7XHJcbiAgICAgICQoJy5tYWluLWNvbnRlbnQnKS5jaGlsZHJlbigpLmVxKGN1clBvcykuY2hpbGRyZW4oKS5hZGRDbGFzcygnc2VjdGlvbi0tbmV4dCcpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICQoJy5tYWluLWNvbnRlbnQnKS5jaGlsZHJlbigpLmVxKGN1clBvcykuY2hpbGRyZW4oKS5hZGRDbGFzcygnc2VjdGlvbi0tcHJldicpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChuZXh0UG9zICE9PSAwICYmIG5leHRQb3MgIT09IGxhc3RJdGVtKSB7XHJcbiAgICAgICQoJy5oZWFkZXItLWN0YScpLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAkKCcuaGVhZGVyLS1jdGEnKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb3V0ZXJOYXYoKSB7XHJcblxyXG4gICAgJCgnLmhlYWRlci0tbmF2LXRvZ2dsZScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAkKCcucGVyc3BlY3RpdmUnKS5hZGRDbGFzcygncGVyc3BlY3RpdmUtLW1vZGFsdmlldycpO1xyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCgnLnBlcnNwZWN0aXZlJykuYWRkQ2xhc3MoJ2VmZmVjdC1yb3RhdGUtbGVmdC0tYW5pbWF0ZScpO1xyXG4gICAgICB9LCAyNSk7XHJcbiAgICAgICQoJy5vdXRlci1uYXYsIC5vdXRlci1uYXYgbGksIC5vdXRlci1uYXYtLXJldHVybicpLmFkZENsYXNzKCdpcy12aXMnKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcub3V0ZXItbmF2LS1yZXR1cm4sIC5vdXRlci1uYXYgbGknKS5jbGljayhmdW5jdGlvbigpe1xyXG5cclxuICAgICAgJCgnLnBlcnNwZWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2VmZmVjdC1yb3RhdGUtbGVmdC0tYW5pbWF0ZScpO1xyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCgnLnBlcnNwZWN0aXZlJykucmVtb3ZlQ2xhc3MoJ3BlcnNwZWN0aXZlLS1tb2RhbHZpZXcnKTtcclxuICAgICAgfSwgNDAwKTtcclxuICAgICAgJCgnLm91dGVyLW5hdiwgLm91dGVyLW5hdiBsaSwgLm91dGVyLW5hdi0tcmV0dXJuJykucmVtb3ZlQ2xhc3MoJ2lzLXZpcycpO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHdvcmtTbGlkZXIoKSB7XHJcbiAgICB2YXIgYWN0aXZlSW5uZXJTbGlkZXI7XHJcblxyXG4gICAgdmFyIG91dGVyU2xpZGVyID0gd29yay5maW5kKCcub3V0ZXItc2xpZGVyJyk7XHJcbiAgICAvKnZhciBvdXRlclNsaWRlclByZXZCdG4gPSBvdXRlclNsaWRlci5zaWJsaW5ncygnLnNsaWRlci0tcHJldicpO1xyXG4gICAgdmFyIG91dGVyU2xpZGVyTmV4dEJ0biA9IG91dGVyU2xpZGVyLnNpYmxpbmdzKCcuc2xpZGVyLS1uZXh0Jyk7XHJcbiovXHJcbiAgICB2YXIgaW5uZXJTbGlkZXIgPSB3b3JrLmZpbmQoJy5pbm5lci1zbGlkZXInKTtcclxuXHJcbiAgICB2YXIgaW5uZXJTbGlkZXJQcmV2QnRuID0gd29yay5maW5kKCcuaW5uZXItc2xpZGVyLS1wcmV2Jyk7XHJcbiAgICB2YXIgaW5uZXJTbGlkZXJOZXh0QnRuID0gd29yay5maW5kKCcuaW5uZXItc2xpZGVyLS1uZXh0Jyk7XHJcblxyXG4gICAgdmFyIG91dGVyU2xpZGVyQ29udHJvbHMgPSB3b3JrLmZpbmQoJy5vdXRlci1zbGlkZXItLWNvbnRyb2xzJyk7XHJcblxyXG4gICAgY29uc29sZS5sb2coaW5uZXJTbGlkZXIpO1xyXG4gICAgY29uc29sZS5sb2coaW5uZXJTbGlkZXJQcmV2QnRuKTtcclxuICAgIGNvbnNvbGUubG9nKGlubmVyU2xpZGVyTmV4dEJ0bik7XHJcblxyXG4gICAgLy8gaW5pdCBzd2lwZXIgc2xpZGVyIGZvciBvdXRlciBzbGlkZXNcclxuICAgIHZhciBvdXRlclN3aXBlciA9IG5ldyBTd2lwZXIgKG91dGVyU2xpZGVyLCB7XHJcbiAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgIGxvb3BlZFNsaWRlczogNCxcclxuICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxyXG4gICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcclxuICAgICAgbm9ybWFsaXplU2xpZGVJbmRleDogdHJ1ZSxcclxuICAgICAgZGlyZWN0aW9uOiAndmVydGljYWwnLFxyXG4gICAgICBhbGxvd1RvdWNoTW92ZTogZmFsc2UsXHJcbiAgICAgIGVmZmVjdDogJ3NsaWRlJyxcclxuICAgICAgLypmYWRlRWZmZWN0OiB7XHJcbiAgICAgICAgY3Jvc3NGYWRlOiB0cnVlXHJcbiAgICAgIH0sKi9cclxuICAgICAgY29udHJvbGxlcjp7XHJcbiAgICAgICAgYnk6ICdzbGlkZSdcclxuICAgICAgfVxyXG4gICAgICAvKixcclxuICAgICAgaGFzaE5hdmlnYXRpb246IHRydWUsXHJcbiAgICAgIGhhc2hOYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgd2F0Y2hTdGF0ZTogdHJ1ZVxyXG4gICAgICB9Ki9cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBvdXRlclN3aXBlckNvbnRyb2xzID0gbmV3IFN3aXBlcihvdXRlclNsaWRlckNvbnRyb2xzLCB7XHJcbiAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgZWZmZWN0OiAnc2xpZGUnLFxyXG4gICAgICBub3JtYWxpemVTbGlkZUluZGV4OiB0cnVlLFxyXG4gICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgIGxvb3BlZFNsaWRlczogNCxcclxuICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxyXG4gICAgICB0b3VjaFJhdGlvOiAwLjIsXHJcbiAgICAgIHNsaWRlVG9DbGlja2VkU2xpZGU6IHRydWVcclxuICAgIH0pO1xyXG5cclxuICAgIG91dGVyU3dpcGVyQ29udHJvbHMuY29udHJvbGxlci5jb250cm9sID0gb3V0ZXJTd2lwZXI7XHJcbiAgICBvdXRlclN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wgPSBvdXRlclN3aXBlckNvbnRyb2xzO1xyXG5cclxuICAgIC8vIGluaXQgc3dpcGVyIHNsaWRlciBmb3Igb3V0ZXIgc2xpZGVzXHJcbiAgICB2YXIgaW5uZXJTd2lwZXIgPSBuZXcgU3dpcGVyIChpbm5lclNsaWRlciwge1xyXG4gICAgICBcclxuICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgLy8gc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxyXG4gICAgICBsb29wZWRTbGlkZXM6IDcsXHJcbiAgICAgIGxvb3BBZGRpdGlvbmFsU2xpZGVzOiAxMCxcclxuICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuXHJcbiAgICAgIGVmZmVjdDogJ2NvdmVyZmxvdycsXHJcbiAgICAgIC8vIGdyYWJDdXJzb3I6IHRydWUsXHJcbiAgICAgIGNvdmVyZmxvd0VmZmVjdDoge1xyXG4gICAgICAgIHJvdGF0ZTogNDAsXHJcbiAgICAgICAgc3RyZXRjaDogMCxcclxuICAgICAgICBkZXB0aDogMTAwLFxyXG4gICAgICAgIG1vZGlmaWVyOiAxLFxyXG4gICAgICAgIHNsaWRlU2hhZG93cyA6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgbm9ybWFsaXplU2xpZGVJbmRleDogdHJ1ZSxcclxuICAgICAgc2xpZGVUb0NsaWNrZWRTbGlkZTogdHJ1ZVxyXG4gICAgICBcclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgXHJcblxyXG5cclxuICB9XHJcblxyXG4gIFxyXG5cclxuICBmdW5jdGlvbiB0cmFuc2l0aW9uTGFiZWxzKCkge1xyXG5cclxuICAgICQoJy53b3JrLXJlcXVlc3QtLWluZm9ybWF0aW9uIGlucHV0JykuZm9jdXNvdXQoZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgIHZhciB0ZXh0VmFsID0gJCh0aGlzKS52YWwoKTtcclxuXHJcbiAgICAgIGlmICh0ZXh0VmFsID09PSBcIlwiKSB7XHJcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnaGFzLXZhbHVlJyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaGFzLXZhbHVlJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGNvcnJlY3QgbW9iaWxlIGRldmljZSB3aW5kb3cgcG9zaXRpb25cclxuICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIG91dGVyTmF2KCk7XHJcbiAgd29ya1NsaWRlcigpO1xyXG4gIHRyYW5zaXRpb25MYWJlbHMoKTtcclxuXHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbi8qIFxyXG5cclxuICQoJy5zbGlkZXItLXByZXYsIC5zbGlkZXItLW5leHQnKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXHJcbiAgICAgICAgICBjdXJMZWZ0ID0gJCgnLnNsaWRlcicpLmZpbmQoJy5zbGlkZXItLWl0ZW0tbGVmdCcpLFxyXG4gICAgICAgICAgY3VyTGVmdFBvcyA9ICQoJy5zbGlkZXInKS5jaGlsZHJlbigpLmluZGV4KGN1ckxlZnQpLFxyXG4gICAgICAgICAgY3VyQ2VudGVyID0gJCgnLnNsaWRlcicpLmZpbmQoJy5zbGlkZXItLWl0ZW0tY2VudGVyJyksXHJcbiAgICAgICAgICBjdXJDZW50ZXJQb3MgPSAkKCcuc2xpZGVyJykuY2hpbGRyZW4oKS5pbmRleChjdXJDZW50ZXIpLFxyXG4gICAgICAgICAgY3VyUmlnaHQgPSAkKCcuc2xpZGVyJykuZmluZCgnLnNsaWRlci0taXRlbS1yaWdodCcpLFxyXG4gICAgICAgICAgY3VyUmlnaHRQb3MgPSAkKCcuc2xpZGVyJykuY2hpbGRyZW4oKS5pbmRleChjdXJSaWdodCksXHJcbiAgICAgICAgICB0b3RhbFdvcmtzID0gJCgnLnNsaWRlcicpLmNoaWxkcmVuKCkubGVuZ3RoLFxyXG4gICAgICAgICAgJGxlZnQgPSAkKCcuc2xpZGVyLS1pdGVtLWxlZnQnKSxcclxuICAgICAgICAgICRjZW50ZXIgPSAkKCcuc2xpZGVyLS1pdGVtLWNlbnRlcicpLFxyXG4gICAgICAgICAgJHJpZ2h0ID0gJCgnLnNsaWRlci0taXRlbS1yaWdodCcpLFxyXG4gICAgICAgICAgJGl0ZW0gPSAkKCcuc2xpZGVyLS1pdGVtJyk7XHJcblxyXG4gICAgICAkKCcuc2xpZGVyJykuYW5pbWF0ZSh7IG9wYWNpdHkgOiAwIH0sIDQwMCk7XHJcblxyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ3NsaWRlci0tbmV4dCcpKSB7XHJcbiAgICAgICAgaWYgKGN1ckxlZnRQb3MgPCB0b3RhbFdvcmtzIC0gMSAmJiBjdXJDZW50ZXJQb3MgPCB0b3RhbFdvcmtzIC0gMSAmJiBjdXJSaWdodFBvcyA8IHRvdGFsV29ya3MgLSAxKSB7XHJcbiAgICAgICAgICAkbGVmdC5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLWxlZnQnKS5uZXh0KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1sZWZ0Jyk7XHJcbiAgICAgICAgICAkY2VudGVyLnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tY2VudGVyJykubmV4dCgpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tY2VudGVyJyk7XHJcbiAgICAgICAgICAkcmlnaHQucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1yaWdodCcpLm5leHQoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLXJpZ2h0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgaWYgKGN1ckxlZnRQb3MgPT09IHRvdGFsV29ya3MgLSAxKSB7XHJcbiAgICAgICAgICAgICRpdGVtLnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tbGVmdCcpLmZpcnN0KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1sZWZ0Jyk7XHJcbiAgICAgICAgICAgICRjZW50ZXIucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKS5uZXh0KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKTtcclxuICAgICAgICAgICAgJHJpZ2h0LnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tcmlnaHQnKS5uZXh0KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1yaWdodCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZiAoY3VyQ2VudGVyUG9zID09PSB0b3RhbFdvcmtzIC0gMSkge1xyXG4gICAgICAgICAgICAkbGVmdC5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLWxlZnQnKS5uZXh0KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1sZWZ0Jyk7XHJcbiAgICAgICAgICAgICRpdGVtLnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tY2VudGVyJykuZmlyc3QoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLWNlbnRlcicpO1xyXG4gICAgICAgICAgICAkcmlnaHQucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1yaWdodCcpLm5leHQoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLXJpZ2h0Jyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgJGxlZnQucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1sZWZ0JykubmV4dCgpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tbGVmdCcpO1xyXG4gICAgICAgICAgICAkY2VudGVyLnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tY2VudGVyJykubmV4dCgpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tY2VudGVyJyk7XHJcbiAgICAgICAgICAgICRpdGVtLnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tcmlnaHQnKS5maXJzdCgpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tcmlnaHQnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKGN1ckxlZnRQb3MgIT09IDAgJiYgY3VyQ2VudGVyUG9zICE9PSAwICYmIGN1clJpZ2h0UG9zICE9PSAwKSB7XHJcbiAgICAgICAgICAkbGVmdC5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLWxlZnQnKS5wcmV2KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1sZWZ0Jyk7XHJcbiAgICAgICAgICAkY2VudGVyLnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tY2VudGVyJykucHJldigpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tY2VudGVyJyk7XHJcbiAgICAgICAgICAkcmlnaHQucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1yaWdodCcpLnByZXYoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLXJpZ2h0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgaWYgKGN1ckxlZnRQb3MgPT09IDApIHtcclxuICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1sZWZ0JykubGFzdCgpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tbGVmdCcpO1xyXG4gICAgICAgICAgICAkY2VudGVyLnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tY2VudGVyJykucHJldigpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tY2VudGVyJyk7XHJcbiAgICAgICAgICAgICRyaWdodC5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLXJpZ2h0JykucHJldigpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tcmlnaHQnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgaWYgKGN1ckNlbnRlclBvcyA9PT0gMCkge1xyXG4gICAgICAgICAgICAkbGVmdC5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLWxlZnQnKS5wcmV2KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1sZWZ0Jyk7XHJcbiAgICAgICAgICAgICRpdGVtLnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tY2VudGVyJykubGFzdCgpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tY2VudGVyJyk7XHJcbiAgICAgICAgICAgICRyaWdodC5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLXJpZ2h0JykucHJldigpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tcmlnaHQnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAkbGVmdC5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLWxlZnQnKS5wcmV2KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1sZWZ0Jyk7XHJcbiAgICAgICAgICAgICRjZW50ZXIucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKS5wcmV2KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKTtcclxuICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1yaWdodCcpLmxhc3QoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLXJpZ2h0Jyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgfSwgNDAwKTtcclxuXHJcbiAgICAkKCcuc2xpZGVyJykuYW5pbWF0ZSh7IG9wYWNpdHkgOiAxIH0sIDQwMCk7XHJcblxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiovIl19
