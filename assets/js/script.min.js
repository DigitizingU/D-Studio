$(document).ready(function(){var e=$(".work"),i=($(".hire"),!0),n=null;$(this).on("mousewheel DOMMouseScroll",function(e){if(!$(".outer-nav").hasClass("is-vis")){e.preventDefault();var t=e.originalEvent.wheelDelta?-e.originalEvent.wheelDelta:20*e.originalEvent.detail;t>50&&i?(i=!1,clearTimeout(n),n=setTimeout(function(){i=!0},800),c(1)):t<-50&&i&&(i=!1,clearTimeout(n),n=setTimeout(function(){i=!0},800),c(-1))}}),$(".side-nav li, .outer-nav li").click(function(){if(!$(this).hasClass("is-active")){var e=$(this),i=e.parent().find(".is-active"),n=e.parent().children().index(i),t=e.parent().children().index(e),o=$(this).parent().children().length-1;d(t),v(n,t,o)}}),$(".cta").click(function(){var e=$(".side-nav").find(".is-active"),i=$(".side-nav").children().index(e),n=$(".side-nav").children().length-1,t=n;d(n),v(i,t,n)});var t,o,s,r,a=document.getElementById("viewport"),l=new Hammer(a);function c(e){var i=$(".side-nav").find(".is-active"),n=$(".side-nav").children().index(i),t=$(".side-nav").children().length-1,o=0;"swipeup"===e.type||40===e.keyCode||e>0?n!==t?(d(o=n+1),v(n,o,t)):(d(o),v(n,o,t)):("swipedown"===e.type||38===e.keyCode||e<0)&&(0!==n?(d(o=n-1),v(n,o,t)):(d(o=t),v(n,o,t)))}function d(e){$(".side-nav, .outer-nav").children().removeClass("is-active"),$(".side-nav").children().eq(e).addClass("is-active"),$(".outer-nav").children().eq(e).addClass("is-active")}function v(e,i,n){$(".main-content").children().removeClass("section--is-active"),$(".main-content").children().eq(i).addClass("section--is-active"),$(".main-content .section").children().removeClass("section--next section--prev"),e===n&&0===i||0===e&&i===n?$(".main-content .section").children().removeClass("section--next section--prev"):e<i?$(".main-content").children().eq(e).children().addClass("section--next"):$(".main-content").children().eq(e).children().addClass("section--prev"),0!==i&&i!==n?$(".header--cta").addClass("is-active"):$(".header--cta").removeClass("is-active")}l.get("swipe").set({direction:Hammer.DIRECTION_VERTICAL}),l.on("swipeup swipedown",function(e){c(e)}),$(document).keyup(function(e){$(".outer-nav").hasClass("is-vis")||(e.preventDefault(),c(e))}),$(".header--nav-toggle").click(function(){$(".perspective").addClass("perspective--modalview"),setTimeout(function(){$(".perspective").addClass("effect-rotate-left--animate")},25),$(".outer-nav, .outer-nav li, .outer-nav--return").addClass("is-vis")}),$(".outer-nav--return, .outer-nav li").click(function(){$(".perspective").removeClass("effect-rotate-left--animate"),setTimeout(function(){$(".perspective").removeClass("perspective--modalview")},400),$(".outer-nav, .outer-nav li, .outer-nav--return").removeClass("is-vis")}),function(){var i=e.find(".outer-slider"),n=e.find(".inner-slider"),t=e.find(".inner-slider--prev"),o=e.find(".inner-slider--next"),s=e.find(".outer-slider--controls");console.log(n),console.log(t),console.log(o);var r=new Swiper(i,{loop:!0,loopedSlides:4,slidesPerView:"auto",centeredSlides:!0,normalizeSlideIndex:!0,direction:"vertical",allowTouchMove:!1,effect:"slide",controller:{by:"slide"}}),a=new Swiper(s,{spaceBetween:0,effect:"slide",normalizeSlideIndex:!0,direction:"horizontal",centeredSlides:!0,loop:!0,loopedSlides:4,slidesPerView:"auto",touchRatio:.2,slideToClickedSlide:!0});a.controller.control=r,r.controller.control=a,new Swiper(n,{direction:"horizontal",loop:!0,spaceBetween:0,slidesPerView:"auto",loopedSlides:7,loopAdditionalSlides:10,centeredSlides:!0,spaceBetween:0,effect:"coverflow",coverflowEffect:{rotate:40,stretch:0,depth:100,modifier:1,slideShadows:!0},normalizeSlideIndex:!0,slideToClickedSlide:!0})}(),$(".work-request--information input").focusout(function(){""===$(this).val()?$(this).removeClass("has-value"):$(this).addClass("has-value"),window.scrollTo(0,0)}),t=$("#startProjectForm"),$("#nameSP"),o=$("#emailSP"),s=$("#service-web"),r=s.closest(".work-request--services"),t.parsley({requiredMessage:"This field is required"}),o.parsley({typeMessage:"Enter a valid e-mail address"}),s.parsley({requiredMessage:"Please select the digital service/s you want us to work on",errorsContainer:function(e){return r},classHandler:function(e){return r}}),t.parsley().on("form:error",function(){alert("validation errors")}).on("form:submit",function(e){return console.log("Form Submitted"),!1})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndvcmsiLCJjYW5TY3JvbGwiLCJzY3JvbGxDb250cm9sbGVyIiwidGhpcyIsIm9uIiwiZSIsImhhc0NsYXNzIiwicHJldmVudERlZmF1bHQiLCJkZWx0YSIsIm9yaWdpbmFsRXZlbnQiLCJ3aGVlbERlbHRhIiwiZGV0YWlsIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInVwZGF0ZUhlbHBlciIsImNsaWNrIiwiJHRoaXMiLCJjdXJBY3RpdmUiLCJwYXJlbnQiLCJmaW5kIiwiY3VyUG9zIiwiY2hpbGRyZW4iLCJpbmRleCIsIm5leHRQb3MiLCJsYXN0SXRlbSIsImxlbmd0aCIsInVwZGF0ZU5hdnMiLCJ1cGRhdGVDb250ZW50Iiwic3RhcnRQcm9qZWN0Rm9ybSIsImVtYWlsRmllbGQiLCJ3ZWJTZXJ2aWNlRmllbGQiLCJzZXJ2aWNlc0NvbnQiLCJ0YXJnZXRFbGVtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJtYyIsIkhhbW1lciIsInBhcmFtIiwidHlwZSIsImtleUNvZGUiLCJyZW1vdmVDbGFzcyIsImVxIiwiYWRkQ2xhc3MiLCJnZXQiLCJzZXQiLCJkaXJlY3Rpb24iLCJESVJFQ1RJT05fVkVSVElDQUwiLCJrZXl1cCIsIm91dGVyU2xpZGVyIiwiaW5uZXJTbGlkZXIiLCJpbm5lclNsaWRlclByZXZCdG4iLCJpbm5lclNsaWRlck5leHRCdG4iLCJvdXRlclNsaWRlckNvbnRyb2xzIiwiY29uc29sZSIsImxvZyIsIm91dGVyU3dpcGVyIiwiU3dpcGVyIiwibG9vcCIsImxvb3BlZFNsaWRlcyIsInNsaWRlc1BlclZpZXciLCJjZW50ZXJlZFNsaWRlcyIsIm5vcm1hbGl6ZVNsaWRlSW5kZXgiLCJhbGxvd1RvdWNoTW92ZSIsImVmZmVjdCIsImNvbnRyb2xsZXIiLCJieSIsIm91dGVyU3dpcGVyQ29udHJvbHMiLCJzcGFjZUJldHdlZW4iLCJ0b3VjaFJhdGlvIiwic2xpZGVUb0NsaWNrZWRTbGlkZSIsImNvbnRyb2wiLCJsb29wQWRkaXRpb25hbFNsaWRlcyIsImNvdmVyZmxvd0VmZmVjdCIsInJvdGF0ZSIsInN0cmV0Y2giLCJkZXB0aCIsIm1vZGlmaWVyIiwic2xpZGVTaGFkb3dzIiwid29ya1NsaWRlciIsImZvY3Vzb3V0IiwidmFsIiwid2luZG93Iiwic2Nyb2xsVG8iLCJjbG9zZXN0IiwicGFyc2xleSIsInJlcXVpcmVkTWVzc2FnZSIsInR5cGVNZXNzYWdlIiwiZXJyb3JzQ29udGFpbmVyIiwiRmllbGQiLCJjbGFzc0hhbmRsZXIiLCJhbGVydCJdLCJtYXBwaW5ncyI6IkFBRUFBLEVBQUFDLFVBQUFDLE1BQUEsV0FFQSxJQUFBQyxFQUFBSCxFQUFBLFNBSUFJLEdBSEFKLEVBQUEsVUFHQSxHQUNBSyxFQUFBLEtBQ0FMLEVBQUFNLE1BQUFDLEdBQUEsNEJBQUEsU0FBQUMsR0FFQSxJQUFBUixFQUFBLGNBQUFTLFNBQUEsVUFBQSxDQUVBRCxFQUFBRSxpQkFFQSxJQUFBQyxFQUFBSCxFQUFBSSxjQUFBLFlBQUFKLEVBQUFJLGNBQUFDLFdBQUEsR0FBQUwsRUFBQUksY0FBQUUsT0FFQUgsRUFBQSxJQUFBUCxHQUNBQSxHQUFBLEVBQ0FXLGFBQUFWLEdBQ0FBLEVBQUFXLFdBQUEsV0FDQVosR0FBQSxHQUNBLEtBQ0FhLEVBQUEsSUFFQU4sR0FBQSxJQUFBUCxJQUNBQSxHQUFBLEVBQ0FXLGFBQUFWLEdBQ0FBLEVBQUFXLFdBQUEsV0FDQVosR0FBQSxHQUNBLEtBQ0FhLEdBQUEsT0FPQWpCLEVBQUEsK0JBQUFrQixNQUFBLFdBRUEsSUFBQWxCLEVBQUFNLE1BQUFHLFNBQUEsYUFBQSxDQUVBLElBQUFVLEVBQUFuQixFQUFBTSxNQUNBYyxFQUFBRCxFQUFBRSxTQUFBQyxLQUFBLGNBQ0FDLEVBQUFKLEVBQUFFLFNBQUFHLFdBQUFDLE1BQUFMLEdBQ0FNLEVBQUFQLEVBQUFFLFNBQUFHLFdBQUFDLE1BQUFOLEdBQ0FRLEVBQUEzQixFQUFBTSxNQUFBZSxTQUFBRyxXQUFBSSxP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RCxTQUNBQyxnQkFBQSw2REFDQUUsZ0JBQUEsU0FBQUMsR0FFQSxPQUFBeEQsR0FFQXlELGFBQUEsU0FBQUQsR0FDQSxPQUFBeEQsS0FPQUgsRUFBQXVELFVBQUEvRSxHQUFBLGFBQUEsV0FFQXFGLE1BQUEsdUJBRUFyRixHQUFBLGNBQUEsU0FBQUMsR0FRQSxPQU5BK0MsUUFBQUMsSUFBQSxtQkFNQSIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGNvZGVraXQtcHJlcGVuZCBcIi92ZW5kb3IvaGFtbWVyLTIuMC44LmpzXCI7XHJcblxyXG4kKCBkb2N1bWVudCApLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG5cclxuICB2YXIgd29yayA9ICQoJy53b3JrJyk7XHJcbiAgdmFyIGhpcmUgPSAkKCcuaGlyZScpO1xyXG5cclxuICAvLyBET01Nb3VzZVNjcm9sbCBpbmNsdWRlZCBmb3IgZmlyZWZveCBzdXBwb3J0XHJcbiAgdmFyIGNhblNjcm9sbCA9IHRydWUsXHJcbiAgICAgIHNjcm9sbENvbnRyb2xsZXIgPSBudWxsO1xyXG4gICQodGhpcykub24oJ21vdXNld2hlZWwgRE9NTW91c2VTY3JvbGwnLCBmdW5jdGlvbihlKXtcclxuXHJcbiAgICBpZiAoISgkKCcub3V0ZXItbmF2JykuaGFzQ2xhc3MoJ2lzLXZpcycpKSkge1xyXG5cclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgdmFyIGRlbHRhID0gKGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhKSA/IC1lLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA6IGUub3JpZ2luYWxFdmVudC5kZXRhaWwgKiAyMDtcclxuXHJcbiAgICAgIGlmIChkZWx0YSA+IDUwICYmIGNhblNjcm9sbCkge1xyXG4gICAgICAgIGNhblNjcm9sbCA9IGZhbHNlO1xyXG4gICAgICAgIGNsZWFyVGltZW91dChzY3JvbGxDb250cm9sbGVyKTtcclxuICAgICAgICBzY3JvbGxDb250cm9sbGVyID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgY2FuU2Nyb2xsID0gdHJ1ZTtcclxuICAgICAgICB9LCA4MDApO1xyXG4gICAgICAgIHVwZGF0ZUhlbHBlcigxKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChkZWx0YSA8IC01MCAmJiBjYW5TY3JvbGwpIHtcclxuICAgICAgICBjYW5TY3JvbGwgPSBmYWxzZTtcclxuICAgICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsQ29udHJvbGxlcik7XHJcbiAgICAgICAgc2Nyb2xsQ29udHJvbGxlciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgIGNhblNjcm9sbCA9IHRydWU7XHJcbiAgICAgICAgfSwgODAwKTtcclxuICAgICAgICB1cGRhdGVIZWxwZXIoLTEpO1xyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICB9KTtcclxuXHJcbiAgJCgnLnNpZGUtbmF2IGxpLCAub3V0ZXItbmF2IGxpJykuY2xpY2soZnVuY3Rpb24oKXtcclxuXHJcbiAgICBpZiAoISgkKHRoaXMpLmhhc0NsYXNzKCdpcy1hY3RpdmUnKSkpIHtcclxuXHJcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXHJcbiAgICAgICAgICBjdXJBY3RpdmUgPSAkdGhpcy5wYXJlbnQoKS5maW5kKCcuaXMtYWN0aXZlJyksXHJcbiAgICAgICAgICBjdXJQb3MgPSAkdGhpcy5wYXJlbnQoKS5jaGlsZHJlbigpLmluZGV4KGN1ckFjdGl2ZSksXHJcbiAgICAgICAgICBuZXh0UG9zID0gJHRoaXMucGFyZW50KCkuY2hpbGRyZW4oKS5pbmRleCgkdGhpcyksXHJcbiAgICAgICAgICBsYXN0SXRlbSA9ICQodGhpcykucGFyZW50KCkuY2hpbGRyZW4oKS5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgdXBkYXRlTmF2cyhuZXh0UG9zKTtcclxuICAgICAgdXBkYXRlQ29udGVudChjdXJQb3MsIG5leHRQb3MsIGxhc3RJdGVtKTtcclxuXHJcbiAgICB9XHJcblxyXG4gIH0pO1xyXG5cclxuICAkKCcuY3RhJykuY2xpY2soZnVuY3Rpb24oKXtcclxuXHJcbiAgICB2YXIgY3VyQWN0aXZlID0gJCgnLnNpZGUtbmF2JykuZmluZCgnLmlzLWFjdGl2ZScpLFxyXG4gICAgICAgIGN1clBvcyA9ICQoJy5zaWRlLW5hdicpLmNoaWxkcmVuKCkuaW5kZXgoY3VyQWN0aXZlKSxcclxuICAgICAgICBsYXN0SXRlbSA9ICQoJy5zaWRlLW5hdicpLmNoaWxkcmVuKCkubGVuZ3RoIC0gMSxcclxuICAgICAgICBuZXh0UG9zID0gbGFzdEl0ZW07XHJcblxyXG4gICAgdXBkYXRlTmF2cyhsYXN0SXRlbSk7XHJcbiAgICB1cGRhdGVDb250ZW50KGN1clBvcywgbmV4dFBvcywgbGFzdEl0ZW0pO1xyXG5cclxuICB9KTtcclxuXHJcbiAgLy8gc3dpcGUgc3VwcG9ydCBmb3IgdG91Y2ggZGV2aWNlc1xyXG4gIHZhciB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdwb3J0JyksXHJcbiAgICAgIG1jID0gbmV3IEhhbW1lcih0YXJnZXRFbGVtZW50KTtcclxuICBtYy5nZXQoJ3N3aXBlJykuc2V0KHsgZGlyZWN0aW9uOiBIYW1tZXIuRElSRUNUSU9OX1ZFUlRJQ0FMIH0pO1xyXG4gIG1jLm9uKCdzd2lwZXVwIHN3aXBlZG93bicsIGZ1bmN0aW9uKGUpIHtcclxuXHJcbiAgICB1cGRhdGVIZWxwZXIoZSk7XHJcblxyXG4gIH0pO1xyXG5cclxuICAkKGRvY3VtZW50KS5rZXl1cChmdW5jdGlvbihlKXtcclxuXHJcbiAgICBpZiAoISgkKCcub3V0ZXItbmF2JykuaGFzQ2xhc3MoJ2lzLXZpcycpKSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHVwZGF0ZUhlbHBlcihlKTtcclxuICAgIH1cclxuXHJcbiAgfSk7XHJcblxyXG4gIC8vIGRldGVybWluZSBzY3JvbGwsIHN3aXBlLCBhbmQgYXJyb3cga2V5IGRpcmVjdGlvblxyXG4gIGZ1bmN0aW9uIHVwZGF0ZUhlbHBlcihwYXJhbSkge1xyXG5cclxuICAgIHZhciBjdXJBY3RpdmUgPSAkKCcuc2lkZS1uYXYnKS5maW5kKCcuaXMtYWN0aXZlJyksXHJcbiAgICAgICAgY3VyUG9zID0gJCgnLnNpZGUtbmF2JykuY2hpbGRyZW4oKS5pbmRleChjdXJBY3RpdmUpLFxyXG4gICAgICAgIGxhc3RJdGVtID0gJCgnLnNpZGUtbmF2JykuY2hpbGRyZW4oKS5sZW5ndGggLSAxLFxyXG4gICAgICAgIG5leHRQb3MgPSAwO1xyXG5cclxuICAgIGlmIChwYXJhbS50eXBlID09PSBcInN3aXBldXBcIiB8fCBwYXJhbS5rZXlDb2RlID09PSA0MCB8fCBwYXJhbSA+IDApIHtcclxuICAgICAgaWYgKGN1clBvcyAhPT0gbGFzdEl0ZW0pIHtcclxuICAgICAgICBuZXh0UG9zID0gY3VyUG9zICsgMTtcclxuICAgICAgICB1cGRhdGVOYXZzKG5leHRQb3MpO1xyXG4gICAgICAgIHVwZGF0ZUNvbnRlbnQoY3VyUG9zLCBuZXh0UG9zLCBsYXN0SXRlbSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdXBkYXRlTmF2cyhuZXh0UG9zKTtcclxuICAgICAgICB1cGRhdGVDb250ZW50KGN1clBvcywgbmV4dFBvcywgbGFzdEl0ZW0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChwYXJhbS50eXBlID09PSBcInN3aXBlZG93blwiIHx8IHBhcmFtLmtleUNvZGUgPT09IDM4IHx8IHBhcmFtIDwgMCl7XHJcbiAgICAgIGlmIChjdXJQb3MgIT09IDApe1xyXG4gICAgICAgIG5leHRQb3MgPSBjdXJQb3MgLSAxO1xyXG4gICAgICAgIHVwZGF0ZU5hdnMobmV4dFBvcyk7XHJcbiAgICAgICAgdXBkYXRlQ29udGVudChjdXJQb3MsIG5leHRQb3MsIGxhc3RJdGVtKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBuZXh0UG9zID0gbGFzdEl0ZW07XHJcbiAgICAgICAgdXBkYXRlTmF2cyhuZXh0UG9zKTtcclxuICAgICAgICB1cGRhdGVDb250ZW50KGN1clBvcywgbmV4dFBvcywgbGFzdEl0ZW0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgLy8gc3luYyBzaWRlIGFuZCBvdXRlciBuYXZpZ2F0aW9uc1xyXG4gIGZ1bmN0aW9uIHVwZGF0ZU5hdnMobmV4dFBvcykge1xyXG5cclxuICAgICQoJy5zaWRlLW5hdiwgLm91dGVyLW5hdicpLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgJCgnLnNpZGUtbmF2JykuY2hpbGRyZW4oKS5lcShuZXh0UG9zKS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAkKCcub3V0ZXItbmF2JykuY2hpbGRyZW4oKS5lcShuZXh0UG9zKS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XHJcblxyXG4gIH1cclxuXHJcbiAgLy8gdXBkYXRlIG1haW4gY29udGVudCBhcmVhXHJcbiAgZnVuY3Rpb24gdXBkYXRlQ29udGVudChjdXJQb3MsIG5leHRQb3MsIGxhc3RJdGVtKSB7XHJcblxyXG4gICAgJCgnLm1haW4tY29udGVudCcpLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ3NlY3Rpb24tLWlzLWFjdGl2ZScpO1xyXG4gICAgJCgnLm1haW4tY29udGVudCcpLmNoaWxkcmVuKCkuZXEobmV4dFBvcykuYWRkQ2xhc3MoJ3NlY3Rpb24tLWlzLWFjdGl2ZScpO1xyXG4gICAgJCgnLm1haW4tY29udGVudCAuc2VjdGlvbicpLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ3NlY3Rpb24tLW5leHQgc2VjdGlvbi0tcHJldicpO1xyXG5cclxuICAgIGlmIChjdXJQb3MgPT09IGxhc3RJdGVtICYmIG5leHRQb3MgPT09IDAgfHwgY3VyUG9zID09PSAwICYmIG5leHRQb3MgPT09IGxhc3RJdGVtKSB7XHJcbiAgICAgICQoJy5tYWluLWNvbnRlbnQgLnNlY3Rpb24nKS5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKCdzZWN0aW9uLS1uZXh0IHNlY3Rpb24tLXByZXYnKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGN1clBvcyA8IG5leHRQb3MpIHtcclxuICAgICAgJCgnLm1haW4tY29udGVudCcpLmNoaWxkcmVuKCkuZXEoY3VyUG9zKS5jaGlsZHJlbigpLmFkZENsYXNzKCdzZWN0aW9uLS1uZXh0Jyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgJCgnLm1haW4tY29udGVudCcpLmNoaWxkcmVuKCkuZXEoY3VyUG9zKS5jaGlsZHJlbigpLmFkZENsYXNzKCdzZWN0aW9uLS1wcmV2Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG5leHRQb3MgIT09IDAgJiYgbmV4dFBvcyAhPT0gbGFzdEl0ZW0pIHtcclxuICAgICAgJCgnLmhlYWRlci0tY3RhJykuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICQoJy5oZWFkZXItLWN0YScpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvdXRlck5hdigpIHtcclxuXHJcbiAgICAkKCcuaGVhZGVyLS1uYXYtdG9nZ2xlJykuY2xpY2soZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICQoJy5wZXJzcGVjdGl2ZScpLmFkZENsYXNzKCdwZXJzcGVjdGl2ZS0tbW9kYWx2aWV3Jyk7XHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAkKCcucGVyc3BlY3RpdmUnKS5hZGRDbGFzcygnZWZmZWN0LXJvdGF0ZS1sZWZ0LS1hbmltYXRlJyk7XHJcbiAgICAgIH0sIDI1KTtcclxuICAgICAgJCgnLm91dGVyLW5hdiwgLm91dGVyLW5hdiBsaSwgLm91dGVyLW5hdi0tcmV0dXJuJykuYWRkQ2xhc3MoJ2lzLXZpcycpO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5vdXRlci1uYXYtLXJldHVybiwgLm91dGVyLW5hdiBsaScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAkKCcucGVyc3BlY3RpdmUnKS5yZW1vdmVDbGFzcygnZWZmZWN0LXJvdGF0ZS1sZWZ0LS1hbmltYXRlJyk7XHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAkKCcucGVyc3BlY3RpdmUnKS5yZW1vdmVDbGFzcygncGVyc3BlY3RpdmUtLW1vZGFsdmlldycpO1xyXG4gICAgICB9LCA0MDApO1xyXG4gICAgICAkKCcub3V0ZXItbmF2LCAub3V0ZXItbmF2IGxpLCAub3V0ZXItbmF2LS1yZXR1cm4nKS5yZW1vdmVDbGFzcygnaXMtdmlzJyk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gd29ya1NsaWRlcigpIHtcclxuICAgIHZhciBhY3RpdmVJbm5lclNsaWRlcjtcclxuXHJcbiAgICB2YXIgb3V0ZXJTbGlkZXIgPSB3b3JrLmZpbmQoJy5vdXRlci1zbGlkZXInKTtcclxuICAgICAgLyp2YXIgb3V0ZXJTbGlkZXJQcmV2QnRuID0gb3V0ZXJTbGlkZXIuc2libGluZ3MoJy5zbGlkZXItLXByZXYnKTtcclxuICAgICAgdmFyIG91dGVyU2xpZGVyTmV4dEJ0biA9IG91dGVyU2xpZGVyLnNpYmxpbmdzKCcuc2xpZGVyLS1uZXh0Jyk7XHJcbiAgICAgICovXHJcbiAgICB2YXIgaW5uZXJTbGlkZXIgPSB3b3JrLmZpbmQoJy5pbm5lci1zbGlkZXInKTtcclxuXHJcbiAgICB2YXIgaW5uZXJTbGlkZXJQcmV2QnRuID0gd29yay5maW5kKCcuaW5uZXItc2xpZGVyLS1wcmV2Jyk7XHJcbiAgICB2YXIgaW5uZXJTbGlkZXJOZXh0QnRuID0gd29yay5maW5kKCcuaW5uZXItc2xpZGVyLS1uZXh0Jyk7XHJcblxyXG4gICAgdmFyIG91dGVyU2xpZGVyQ29udHJvbHMgPSB3b3JrLmZpbmQoJy5vdXRlci1zbGlkZXItLWNvbnRyb2xzJyk7XHJcblxyXG4gICAgY29uc29sZS5sb2coaW5uZXJTbGlkZXIpO1xyXG4gICAgY29uc29sZS5sb2coaW5uZXJTbGlkZXJQcmV2QnRuKTtcclxuICAgIGNvbnNvbGUubG9nKGlubmVyU2xpZGVyTmV4dEJ0bik7XHJcblxyXG4gICAgLy8gaW5pdCBzd2lwZXIgc2xpZGVyIGZvciBvdXRlciBzbGlkZXNcclxuICAgIHZhciBvdXRlclN3aXBlciA9IG5ldyBTd2lwZXIgKG91dGVyU2xpZGVyLCB7XHJcbiAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgIGxvb3BlZFNsaWRlczogNCxcclxuICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxyXG4gICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcclxuICAgICAgbm9ybWFsaXplU2xpZGVJbmRleDogdHJ1ZSxcclxuICAgICAgZGlyZWN0aW9uOiAndmVydGljYWwnLFxyXG4gICAgICBhbGxvd1RvdWNoTW92ZTogZmFsc2UsXHJcbiAgICAgIGVmZmVjdDogJ3NsaWRlJyxcclxuICAgICAgLypmYWRlRWZmZWN0OiB7XHJcbiAgICAgICAgY3Jvc3NGYWRlOiB0cnVlXHJcbiAgICAgIH0sKi9cclxuICAgICAgY29udHJvbGxlcjp7XHJcbiAgICAgICAgYnk6ICdzbGlkZSdcclxuICAgICAgfVxyXG4gICAgICAvKixcclxuICAgICAgaGFzaE5hdmlnYXRpb246IHRydWUsXHJcbiAgICAgIGhhc2hOYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgd2F0Y2hTdGF0ZTogdHJ1ZVxyXG4gICAgICB9Ki9cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBvdXRlclN3aXBlckNvbnRyb2xzID0gbmV3IFN3aXBlcihvdXRlclNsaWRlckNvbnRyb2xzLCB7XHJcbiAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgZWZmZWN0OiAnc2xpZGUnLFxyXG4gICAgICBub3JtYWxpemVTbGlkZUluZGV4OiB0cnVlLFxyXG4gICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcclxuICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgIGxvb3BlZFNsaWRlczogNCxcclxuICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxyXG4gICAgICB0b3VjaFJhdGlvOiAwLjIsXHJcbiAgICAgIHNsaWRlVG9DbGlja2VkU2xpZGU6IHRydWVcclxuICAgIH0pO1xyXG5cclxuICAgIG91dGVyU3dpcGVyQ29udHJvbHMuY29udHJvbGxlci5jb250cm9sID0gb3V0ZXJTd2lwZXI7XHJcbiAgICBvdXRlclN3aXBlci5jb250cm9sbGVyLmNvbnRyb2wgPSBvdXRlclN3aXBlckNvbnRyb2xzO1xyXG5cclxuICAgIC8vIGluaXQgc3dpcGVyIHNsaWRlciBmb3Igb3V0ZXIgc2xpZGVzXHJcbiAgICB2YXIgaW5uZXJTd2lwZXIgPSBuZXcgU3dpcGVyIChpbm5lclNsaWRlciwge1xyXG4gICAgICBcclxuICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuICAgICAgLy8gc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxyXG4gICAgICBsb29wZWRTbGlkZXM6IDcsXHJcbiAgICAgIGxvb3BBZGRpdGlvbmFsU2xpZGVzOiAxMCxcclxuICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgIHNwYWNlQmV0d2VlbjogMCxcclxuXHJcbiAgICAgIGVmZmVjdDogJ2NvdmVyZmxvdycsXHJcbiAgICAgIC8vIGdyYWJDdXJzb3I6IHRydWUsXHJcbiAgICAgIGNvdmVyZmxvd0VmZmVjdDoge1xyXG4gICAgICAgIHJvdGF0ZTogNDAsXHJcbiAgICAgICAgc3RyZXRjaDogMCxcclxuICAgICAgICBkZXB0aDogMTAwLFxyXG4gICAgICAgIG1vZGlmaWVyOiAxLFxyXG4gICAgICAgIHNsaWRlU2hhZG93cyA6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgbm9ybWFsaXplU2xpZGVJbmRleDogdHJ1ZSxcclxuICAgICAgc2xpZGVUb0NsaWNrZWRTbGlkZTogdHJ1ZVxyXG4gICAgICBcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG5cclxuICBcclxuXHJcbiAgZnVuY3Rpb24gdHJhbnNpdGlvbkxhYmVscygpIHtcclxuXHJcbiAgICAkKCcud29yay1yZXF1ZXN0LS1pbmZvcm1hdGlvbiBpbnB1dCcpLmZvY3Vzb3V0KGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICB2YXIgdGV4dFZhbCA9ICQodGhpcykudmFsKCk7XHJcblxyXG4gICAgICBpZiAodGV4dFZhbCA9PT0gXCJcIikge1xyXG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2hhcy12YWx1ZScpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2hhcy12YWx1ZScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBjb3JyZWN0IG1vYmlsZSBkZXZpY2Ugd2luZG93IHBvc2l0aW9uXHJcbiAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzdGFydFByb2plY3RGb3JtKCl7XHJcbiAgICAgIHZhciBzdGFydFByb2plY3RGb3JtID0gJCgnI3N0YXJ0UHJvamVjdEZvcm0nKTtcclxuXHJcbiAgICAgIHZhciBuYW1lRmllbGQgPSAkKCcjbmFtZVNQJyk7XHJcbiAgICAgIHZhciBlbWFpbEZpZWxkID0gJCgnI2VtYWlsU1AnKTtcclxuICAgICAgdmFyIHdlYlNlcnZpY2VGaWVsZCA9ICQoJyNzZXJ2aWNlLXdlYicpO1xyXG4gICAgICB2YXIgc2VydmljZXNDb250ID0gd2ViU2VydmljZUZpZWxkLmNsb3Nlc3QoJy53b3JrLXJlcXVlc3QtLXNlcnZpY2VzJyk7XHJcblxyXG5cclxuICAgICAgLy8gY2hhbmdlIHZhbGlkYXRpb24gbWVzc2FnZXMgYW5kIGN1c3RvbWl6ZSBvcHRpb25zXHJcblxyXG4gICAgICBzdGFydFByb2plY3RGb3JtLnBhcnNsZXkoe1xyXG4gICAgICAgIHJlcXVpcmVkTWVzc2FnZTogJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnXHJcbiAgICAgICAgXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZW1haWxGaWVsZC5wYXJzbGV5KHtcclxuICAgICAgICB0eXBlTWVzc2FnZTogXCJFbnRlciBhIHZhbGlkIGUtbWFpbCBhZGRyZXNzXCJcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB3ZWJTZXJ2aWNlRmllbGQucGFyc2xleSh7XHJcbiAgICAgICAgcmVxdWlyZWRNZXNzYWdlOiBcIlBsZWFzZSBzZWxlY3QgdGhlIGRpZ2l0YWwgc2VydmljZS9zIHlvdSB3YW50IHVzIHRvIHdvcmsgb25cIiwgLy8gb25seSB3b3JrcyB3aGVuIHVzaW5nIHRoZSBmaXJzdCBjaGVja2JveCBpbiB0aGUgZ3JvdXBcclxuICAgICAgICBlcnJvcnNDb250YWluZXI6IGZ1bmN0aW9uIChGaWVsZCkge1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICByZXR1cm4gc2VydmljZXNDb250O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xhc3NIYW5kbGVyOiBmdW5jdGlvbiAoRmllbGQpIHtcclxuICAgICAgICAgIHJldHVybiBzZXJ2aWNlc0NvbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICAvLyBhY3QgdG8gdmFsaWRhdGlvbiBlcnJvcnMgYW5kIHN1Y2Nlc3MgXHJcblxyXG4gICAgICBzdGFydFByb2plY3RGb3JtLnBhcnNsZXkoKS5vbignZm9ybTplcnJvcicsZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICBhbGVydCgndmFsaWRhdGlvbiBlcnJvcnMnKTsgIFxyXG5cclxuICAgICAgfSkub24oJ2Zvcm06c3VibWl0JyxmdW5jdGlvbihlKXtcclxuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnRm9ybSBTdWJtaXR0ZWQnKTtcclxuXHJcbiAgICAgICAgICAvLyB3cml0ZSBjb2RlIGhlcmUgdG8gc3VibWl0IHRvIERCXHJcblxyXG4gICAgICAgICAgXHJcblxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlOyAgXHJcbiAgICAgIH0pO1xyXG5cclxuXHJcblxyXG5cclxuICB9XHJcblxyXG4gIG91dGVyTmF2KCk7XHJcbiAgd29ya1NsaWRlcigpO1xyXG4gIHRyYW5zaXRpb25MYWJlbHMoKTtcclxuXHJcbiAgc3RhcnRQcm9qZWN0Rm9ybSgpO1xyXG5cclxufSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuLyogXHJcblxyXG4gJCgnLnNsaWRlci0tcHJldiwgLnNsaWRlci0tbmV4dCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcclxuICAgICAgICAgIGN1ckxlZnQgPSAkKCcuc2xpZGVyJykuZmluZCgnLnNsaWRlci0taXRlbS1sZWZ0JyksXHJcbiAgICAgICAgICBjdXJMZWZ0UG9zID0gJCgnLnNsaWRlcicpLmNoaWxkcmVuKCkuaW5kZXgoY3VyTGVmdCksXHJcbiAgICAgICAgICBjdXJDZW50ZXIgPSAkKCcuc2xpZGVyJykuZmluZCgnLnNsaWRlci0taXRlbS1jZW50ZXInKSxcclxuICAgICAgICAgIGN1ckNlbnRlclBvcyA9ICQoJy5zbGlkZXInKS5jaGlsZHJlbigpLmluZGV4KGN1ckNlbnRlciksXHJcbiAgICAgICAgICBjdXJSaWdodCA9ICQoJy5zbGlkZXInKS5maW5kKCcuc2xpZGVyLS1pdGVtLXJpZ2h0JyksXHJcbiAgICAgICAgICBjdXJSaWdodFBvcyA9ICQoJy5zbGlkZXInKS5jaGlsZHJlbigpLmluZGV4KGN1clJpZ2h0KSxcclxuICAgICAgICAgIHRvdGFsV29ya3MgPSAkKCcuc2xpZGVyJykuY2hpbGRyZW4oKS5sZW5ndGgsXHJcbiAgICAgICAgICAkbGVmdCA9ICQoJy5zbGlkZXItLWl0ZW0tbGVmdCcpLFxyXG4gICAgICAgICAgJGNlbnRlciA9ICQoJy5zbGlkZXItLWl0ZW0tY2VudGVyJyksXHJcbiAgICAgICAgICAkcmlnaHQgPSAkKCcuc2xpZGVyLS1pdGVtLXJpZ2h0JyksXHJcbiAgICAgICAgICAkaXRlbSA9ICQoJy5zbGlkZXItLWl0ZW0nKTtcclxuXHJcbiAgICAgICQoJy5zbGlkZXInKS5hbmltYXRlKHsgb3BhY2l0eSA6IDAgfSwgNDAwKTtcclxuXHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygnc2xpZGVyLS1uZXh0JykpIHtcclxuICAgICAgICBpZiAoY3VyTGVmdFBvcyA8IHRvdGFsV29ya3MgLSAxICYmIGN1ckNlbnRlclBvcyA8IHRvdGFsV29ya3MgLSAxICYmIGN1clJpZ2h0UG9zIDwgdG90YWxXb3JrcyAtIDEpIHtcclxuICAgICAgICAgICRsZWZ0LnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tbGVmdCcpLm5leHQoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLWxlZnQnKTtcclxuICAgICAgICAgICRjZW50ZXIucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKS5uZXh0KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKTtcclxuICAgICAgICAgICRyaWdodC5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLXJpZ2h0JykubmV4dCgpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tcmlnaHQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBpZiAoY3VyTGVmdFBvcyA9PT0gdG90YWxXb3JrcyAtIDEpIHtcclxuICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1sZWZ0JykuZmlyc3QoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLWxlZnQnKTtcclxuICAgICAgICAgICAgJGNlbnRlci5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLWNlbnRlcicpLm5leHQoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLWNlbnRlcicpO1xyXG4gICAgICAgICAgICAkcmlnaHQucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1yaWdodCcpLm5leHQoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLXJpZ2h0Jyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmIChjdXJDZW50ZXJQb3MgPT09IHRvdGFsV29ya3MgLSAxKSB7XHJcbiAgICAgICAgICAgICRsZWZ0LnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tbGVmdCcpLm5leHQoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLWxlZnQnKTtcclxuICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKS5maXJzdCgpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tY2VudGVyJyk7XHJcbiAgICAgICAgICAgICRyaWdodC5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLXJpZ2h0JykubmV4dCgpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tcmlnaHQnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAkbGVmdC5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLWxlZnQnKS5uZXh0KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1sZWZ0Jyk7XHJcbiAgICAgICAgICAgICRjZW50ZXIucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKS5uZXh0KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKTtcclxuICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1yaWdodCcpLmZpcnN0KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1yaWdodCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBpZiAoY3VyTGVmdFBvcyAhPT0gMCAmJiBjdXJDZW50ZXJQb3MgIT09IDAgJiYgY3VyUmlnaHRQb3MgIT09IDApIHtcclxuICAgICAgICAgICRsZWZ0LnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tbGVmdCcpLnByZXYoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLWxlZnQnKTtcclxuICAgICAgICAgICRjZW50ZXIucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKS5wcmV2KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKTtcclxuICAgICAgICAgICRyaWdodC5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLXJpZ2h0JykucHJldigpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tcmlnaHQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBpZiAoY3VyTGVmdFBvcyA9PT0gMCkge1xyXG4gICAgICAgICAgICAkaXRlbS5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLWxlZnQnKS5sYXN0KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1sZWZ0Jyk7XHJcbiAgICAgICAgICAgICRjZW50ZXIucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKS5wcmV2KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKTtcclxuICAgICAgICAgICAgJHJpZ2h0LnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tcmlnaHQnKS5wcmV2KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1yaWdodCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZiAoY3VyQ2VudGVyUG9zID09PSAwKSB7XHJcbiAgICAgICAgICAgICRsZWZ0LnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tbGVmdCcpLnByZXYoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLWxlZnQnKTtcclxuICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKS5sYXN0KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1jZW50ZXInKTtcclxuICAgICAgICAgICAgJHJpZ2h0LnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tcmlnaHQnKS5wcmV2KCkuYWRkQ2xhc3MoJ3NsaWRlci0taXRlbS1yaWdodCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICRsZWZ0LnJlbW92ZUNsYXNzKCdzbGlkZXItLWl0ZW0tbGVmdCcpLnByZXYoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLWxlZnQnKTtcclxuICAgICAgICAgICAgJGNlbnRlci5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLWNlbnRlcicpLnByZXYoKS5hZGRDbGFzcygnc2xpZGVyLS1pdGVtLWNlbnRlcicpO1xyXG4gICAgICAgICAgICAkaXRlbS5yZW1vdmVDbGFzcygnc2xpZGVyLS1pdGVtLXJpZ2h0JykubGFzdCgpLmFkZENsYXNzKCdzbGlkZXItLWl0ZW0tcmlnaHQnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICB9LCA0MDApO1xyXG5cclxuICAgICQoJy5zbGlkZXInKS5hbmltYXRlKHsgb3BhY2l0eSA6IDEgfSwgNDAwKTtcclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuKi8iXX0=
